---
id: 331
title: Provide captcha to clojure forms
date: 2013-11-16T11:33:20+00:00
author: admin
layout: post
guid: http://blog.sveri.de/?p=331
permalink: /2013/11/16/provide-captcha-to-clojure-forms/
categories:
  - Computer-Mist
  - programming
tags:
  - clojure
  - recaptcha
---
Today i added the google captcha library to one of my clojure projects. To do this you have to add:
  
[codesyntax lang=&#8220;java&#8220;]

<pre>[net.tanesha.recaptcha4j/recaptcha4j "0.0.8"]</pre>

[/codesyntax]

to your projects dependencies.
  
To your html template add the following code:
  
[codesyntax lang=&#8220;java&#8220;]

<pre>&lt;div class="form-group"&gt;
	{% if captcha-error %}
		&lt;div class="error"&gt;{{captcha-error}}&lt;/div&gt;
	{% endif %}
	&lt;script type="text/javascript"
		src="http://www.google.com/recaptcha/api/challenge?k=challenge_key"&gt;
	&lt;/script&gt;
&lt;/div&gt;</pre>

[/codesyntax]
  
And in your clojure code handle the request like this:
  
[codesyntax lang=&#8220;java&#8220;]

<pre>(defn connectReCaptch [recaptcha_response_field recaptcha_challenge_field]
  (let [reCaptcha (new ReCaptchaImpl)]
    (.setPrivateKey reCaptcha  "private_key")
    (.checkAnswer reCaptcha "your-domain", recaptcha_challenge_field, recaptcha_response_field)))

(.isValid (connectReCaptch recaptcha_response_field recaptcha_challenge_field))</pre>

[/codesyntax]
  
The two arguments are provided by the form that is generated by the captcha js.
  
Thats it so far ðŸ™‚

&nbsp;

&nbsp;